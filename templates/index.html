<!DOCTYPE html>
<html>
<head>
    <title>Monty Hall Problem Simulation</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#startButton').click(function() {
                var numSimulations = $('#numSimulations').val();
                $.ajax({
                    type: 'POST',
                    url: '/start_simulations',
                    data: { num_simulations: numSimulations },
                    success: function(response) {
                        // Update UI with simulation results
                        $('#simulationCount').text(response.simulation_count);
                        $('#totalWinsRandom').text(response.total_wins_random);
                        $('#totalWinsKeep').text(response.total_wins_keep);
                        $('#totalWinsSwitch').text(response.total_wins_switch);

                        // Plot simulation histories (optional)
                        plotHistory(response.history_random, '#historyRandom', 'Random Strategy');
                        plotHistory(response.history_keep, '#historyKeep', 'Keep Strategy');
                        plotHistory(response.history_switch, '#historySwitch', 'Switch Strategy');
                    }
                });
            });

            function plotHistory(history, elementId, title) {
                var x = Array.from(Array(history.length).keys());
                var y = history;

                var plt = document.createElement('canvas');
                plt.id = elementId.substring(1);
                $(elementId).empty().append(plt);

                var ctx = plt.getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: x,
                        datasets: [{
                            label: title,
                            data: y,
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1,
                            fill: false
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero: true
                                }
                            }]
                        }
                    }
                });
            }
        });
    </script>
</head>
<body>
    <h1>Monty Hall Problem Simulation</h1>
    
    <h2>Simulation Controls</h2>
    <form>
        Number of Simulations: <input type="text" id="numSimulations"><br><br>
        <button type="button" id="startButton">Start Simulations</button>
    </form>
    
    <h2>Simulation Results</h2>
    <p>Simulation Count: <span id="simulationCount"></span></p>
    <p>Total Wins Random: <span id="totalWinsRandom"></span></p>
    <p>Total Wins Keep: <span id="totalWinsKeep"></span></p>
    <p>Total Wins Switch: <span id="totalWinsSwitch"></span></p>

    <h2>Simulation History</h2>
    <div id="historyRandom" style="width: 600px; height: 400px;"></div>
    <div id="historyKeep" style="width: 600px; height: 400px;"></div>
    <div id="historySwitch" style="width: 600px; height: 400px;"></div>
</body>
</html>
